<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Herramientas de Base de Datos - CSU</title>
    <link rel="stylesheet" href="../Estilos.css">
    <link rel="stylesheet" href="Herramientas BD.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lucide/1.0.0/lucide.min.css">
</head>
<body>
        <div class="container">
                <!-- Sidebar -->
                <aside class="sidebar">
                        <div class="logo-wrap">
                                <img class="logo" src="../LOGO_COLSOF.png" alt="Logo COLSOF" />
                                <div class="brand">COLSOF S.A.S</div>
                        </div>

                        <div class="menu-label">Menu</div>
                        <ul class="menu-list">
                                <li class="menu-item"><a href="../Menu principal Admin.html">
                                        <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                            <path d="M3 10.5L12 3l9 7.5V21a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1V10.5z" stroke="#0b3a66" stroke-width="1.5" fill="#e8f0fb"/>
                                        </svg>
                                        <span>Inicio</span>
                                </a></li>
                                <li class="menu-item"><a href="../Estadisticas/Estadisticas.html">
                                        <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                            <rect x="3" y="13" width="6" height="8" rx="1.5" fill="#e3f2fd" stroke="#1976d2" stroke-width="1.5"/>
                                            <rect x="9" y="3" width="6" height="18" rx="1.5" fill="#e3f2fd" stroke="#1976d2" stroke-width="1.5"/>
                                            <rect x="15" y="9" width="6" height="12" rx="1.5" fill="#e3f2fd" stroke="#1976d2" stroke-width="1.5"/>
                                        </svg>
                                        <span>Estadísticas</span></a></li>
                                <li class="menu-item active"><a href="#">
                                        <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                            <ellipse cx="12" cy="6" rx="9" ry="4" fill="#fffde7" stroke="#fbc02d" stroke-width="1.5"/>
                                            <path d="M3 6v12c0 2.21 4.03 4 9 4s9-1.79 9-4V6" stroke="#fbc02d" stroke-width="1.5" fill="none"/>
                                        </svg>
                                        <span>Herramientas BD</span></a></li>
                                <li class="menu-item">
                                    <details>
                                        <summary>
                                            <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                                <circle cx="12" cy="8" r="4" fill="#e3f2fd" stroke="#1976d2" stroke-width="1.5"/>
                                                <path d="M4 20c0-3.31 3.58-6 8-6s8 2.69 8 6" stroke="#1976d2" stroke-width="1.5" fill="none"/>
                                            </svg>
                                            <span>Usuarios</span>
                                            <span class="chev">▾</span>
                                        </summary>
                                        <ul class="sub-list">
                                            <li><a href="../Creacion de usuarios.html">Registrar</a></li>
                                            <li><a href="../Usuarios/Lista/Lista.html">Lista</a></li>
                                            <li><a href="../Usuarios/Roles/Roles.html">Roles</a></li>
                                            <li><a href="../Usuarios/Monitoreo/Monitoreo.html">Monitoreo</a></li>
                                        </ul>
                                    </details>
                                </li>
                                <li class="menu-item">
                                    <details>
                                        <summary>
                                            <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                                <rect x="3" y="6" width="18" height="12" rx="2" fill="#fffde7" stroke="#fbc02d" stroke-width="1.5"/>
                                                <circle cx="8" cy="12" r="2" fill="#e3f2fd" stroke="#1976d2" stroke-width="1.2"/>
                                                <rect x="13" y="10" width="5" height="2" rx="1" fill="#e3f2fd" stroke="#1976d2" stroke-width="1.2"/>
                                            </svg>
                                            <span>Tecnico</span>
                                            <span class="chev">▾</span>
                                        </summary>
                                        <ul class="sub-list">
                                            <li><a href="../Tecnico/Casos/Casos.html">Casos</a></li>
                                            <li><a href="../Tecnico/Evidencias/Evidencias.html">Evidencias</a></li>
                                        </ul>
                                    </details>
                                </li>
                                <li class="menu-item notif">
                                    <a href="../Notificaciones/Notificaciones.html">
                                        <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                            <path d="M12 22a2 2 0 002-2H10a2 2 0 002 2z" stroke="#111" stroke-width="1.2" fill="none"/>
                                            <path d="M18 16v-5a6 6 0 10-12 0v5l-2 2h16l-2-2z" stroke="#111" stroke-width="1.2" fill="none"/>
                                        </svg>
                                        <span>Notificaciones</span> <span class="badge">10</span></a>
                                </li>
                                <li class="menu-item">
                                    <a href="../Terminal/Terminal.html">
                                        <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                            <circle cx="12" cy="12" r="3" fill="#e3f2fd" stroke="#1976d2" stroke-width="1.5"/>
                                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h.09a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h.09a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v.09a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z" stroke="#1976d2" stroke-width="1.2" fill="#e3f2fd"/>
                                        </svg>
                                        <span>Terminal</span></a>
                                </li>
                        </ul>

                        <div class="sidebar-bottom"></div>
                </aside>

                <main class="main-content">
                        <div class="top-header">
                                <div class="header-left"></div>
                                <div class="header-right">
                                    <div class="profile">
                                        <div class="avatar">
                                            <img src="../LOGO_COLSOF.png" alt="Avatar" />
                                        </div>
                                        <div class="profile-info">
                                            <div class="profile-name">AdminColsof</div>
                                            <div class="profile-email">admincolsof@colsof.com.co</div>
                                        </div>
                                        <button class="profile-menu-btn" id="btnProfile">⋮</button>
                                        <div class="profile-menu" id="menuProfile">
                                            <button class="logout-btn" id="btnLogout">Cerrar sesión</button>
                                        </div>
                                    </div>
                                </div>
                        </div>

                        <div class="db-page bg-gradient-page">
                                <div class="db-container">
                                        <!-- Header -->
                                        <div class="header">
                                                <div class="header-content">
                                                        <div class="header-icon">
                                                                <i data-lucide="database" class="header-icon-svg"></i>
                                                        </div>
                                                        <div>
                                                                <h1 class="header-title">Herramientas de Base de Datos</h1>
                                                                <p class="header-subtitle">Gestión, consultas y mantenimiento de la base de datos CSU</p>
                                                        </div>
                                                </div>
                                        </div>

            <!-- Database Status Cards -->
            <div class="stats-grid">
                <div class="stat-card border-blue">
                    <div class="stat-label">Tablas</div>
                    <div class="stat-value" id="tables-count">24</div>
                </div>
                <div class="stat-card border-emerald">
                    <div class="stat-label">Registros</div>
                    <div class="stat-value" id="records-count">156,789</div>
                </div>
                <div class="stat-card border-purple">
                    <div class="stat-label">Tamaño Total</div>
                    <div class="stat-value" id="db-size">2.4 GB</div>
                </div>
                <div class="stat-card border-amber">
                    <div class="stat-label">Último Backup</div>
                    <div class="stat-value-small" id="last-backup">2026-01-19 08:00</div>
                </div>
                <div class="stat-card border-cyan">
                    <div class="stat-label">Uptime</div>
                    <div class="stat-value-small" id="uptime">45 días 12 hrs</div>
                </div>
            </div>

            <!-- Tabs Container -->
            <div class="tabs-container">
                <!-- Tabs Navigation -->
                <div class="tabs-nav">
                    <div class="tabs-list">
                        <button class="tab-button active" data-tab="consultas">
                            <i data-lucide="search" class="tab-icon"></i>
                            Consultas SQL
                        </button>
                        <button class="tab-button" data-tab="backup">
                            <i data-lucide="save" class="tab-icon"></i>
                            Backup & Restore
                        </button>
                        <button class="tab-button" data-tab="mantenimiento">
                            <i data-lucide="settings" class="tab-icon"></i>
                            Mantenimiento
                        </button>
                        <button class="tab-button" data-tab="importar">
                            <i data-lucide="upload" class="tab-icon"></i>
                            Importar/Exportar
                        </button>
                    </div>
                </div>

                <!-- Tab Content -->
                <div class="tab-content">
                    <!-- Consultas SQL Tab -->
                    <div class="tab-pane active" id="consultas-tab">
                        <div class="query-container">
                            <!-- Left Column: Query Editor and Results -->
                            <div class="query-editor-section">
                                <div class="section-header">
                                    <label class="section-title">Editor de Consultas SQL</label>
                                </div>
                                <textarea 
                                    id="query-editor" 
                                    class="query-editor" 
                                    placeholder="Escribe tu consulta SQL aquí..."
                                >SELECT * FROM casos WHERE estado != "Resuelto" ORDER BY fecha_creacion DESC</textarea>
                                
                                <div class="query-actions">
                                    <button class="btn btn-primary" id="execute-query">
                                        <i data-lucide="search" class="btn-icon"></i>
                                        Ejecutar Consulta
                                    </button>
                                    <button class="btn btn-secondary" id="clear-query">
                                        <i data-lucide="trash-2" class="btn-icon"></i>
                                        Limpiar
                                    </button>
                                    <button class="btn btn-success hidden" id="export-results">
                                        <i data-lucide="download" class="btn-icon"></i>
                                        Exportar
                                    </button>
                                </div>

                                <!-- Query Results -->
                                <div class="query-results" id="query-results">
                                    <!-- Results will be displayed here -->
                                </div>
                            </div>

                            <!-- Right Column: Sample Queries -->
                            <div class="sample-queries-section">
                                <div class="section-header">
                                    <h3 class="section-title">Consultas Predefinidas</h3>
                                </div>
                                <div class="sample-queries-list">
                                    <div class="sample-query" data-query="SELECT * FROM casos WHERE estado != 'Resuelto' ORDER BY fecha_creacion DESC">
                                        <div class="query-name">Casos sin resolver</div>
                                        <div class="query-description">Lista todos los casos activos pendientes de resolución</div>
                                        <code class="query-preview">SELECT * FROM casos WHERE estado != "Resuelto" ORDER BY fecha_creacion DESC...</code>
                                    </div>
                                    <div class="sample-query" data-query="SELECT tecnico_id, COUNT(*) as total FROM casos WHERE estado = 'En Curso' GROUP BY tecnico_id ORDER BY total DESC">
                                        <div class="query-name">Técnicos con mayor carga</div>
                                        <div class="query-description">Muestra técnicos ordenados por cantidad de casos activos</div>
                                        <code class="query-preview">SELECT tecnico_id, COUNT(*) as total FROM casos WHERE estado = "En Curso" GROUP BY tecnico_id...</code>
                                    </div>
                                    <div class="sample-query" data-query="SELECT prioridad, COUNT(*) as cantidad FROM casos GROUP BY prioridad">
                                        <div class="query-name">Casos por prioridad</div>
                                        <div class="query-description">Distribución de casos según nivel de prioridad</div>
                                        <code class="query-preview">SELECT prioridad, COUNT(*) as cantidad FROM casos GROUP BY prioridad...</code>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Backup Tab -->
                    <div class="tab-pane" id="backup-tab">
                        <div class="backup-container">
                            <!-- Left Column: Backup Actions -->
                            <div class="backup-actions-section">
                                <div class="section-header">
                                    <h3 class="section-title">Crear Backup</h3>
                                </div>
                                <div class="backup-form">
                                    <div class="form-group">
                                        <label class="form-label">Tipo de Backup</label>
                                        <select class="form-select" id="backup-type" title="Seleccionar tipo de backup">
                                            <option>Completo (Base de datos completa)</option>
                                            <option>Incremental (Solo cambios)</option>
                                            <option>Diferencial (Desde último completo)</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Ubicación</label>
                                        <input type="text" class="form-input" value="/backups/csu_backup_" id="backup-location" title="Ubicación del backup">
                                    </div>
                                    <button class="btn btn-primary btn-full" id="create-backup">
                                        <i data-lucide="save" class="btn-icon"></i>
                                        Crear Backup Ahora
                                    </button>
                                </div>

                                <div class="restore-section">
                                    <div class="section-header">
                                        <h3 class="section-title">Restaurar desde Backup</h3>
                                    </div>
                                    <div class="warning-card">
                                        <div class="warning-header">
                                            <i data-lucide="alert-circle" class="warning-icon"></i>
                                            <div class="warning-title">Advertencia</div>
                                        </div>
                                        <div class="warning-text">
                                            Restaurar un backup sobrescribirá todos los datos actuales. 
                                            Asegúrate de crear un backup antes de proceder.
                                        </div>
                                        <button class="btn btn-warning btn-full" id="select-backup-file">
                                            <i data-lucide="upload" class="btn-icon"></i>
                                            Seleccionar Archivo de Backup
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Right Column: Backup History -->
                            <div class="backup-history-section">
                                <div class="section-header">
                                    <h3 class="section-title">Historial de Backups</h3>
                                </div>
                                <div class="backup-history-list">
                                    <div class="backup-item">
                                        <div class="backup-header">
                                            <div class="backup-info">
                                                <i data-lucide="check-circle" class="backup-icon success"></i>
                                                <div>
                                                    <div class="backup-date">2026-01-19 08:00</div>
                                                    <div class="backup-type">Automático</div>
                                                </div>
                                            </div>
                                            <div class="backup-size">2.4 GB</div>
                                        </div>
                                        <div class="backup-actions">
                                            <button class="btn-backup-action restore">Restaurar</button>
                                            <button class="btn-backup-action download">Descargar</button>
                                            <button class="btn-backup-action delete" aria-label="Eliminar backup">
                                                <i data-lucide="trash-2" class="btn-icon-small"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="backup-item">
                                        <div class="backup-header">
                                            <div class="backup-info">
                                                <i data-lucide="check-circle" class="backup-icon success"></i>
                                                <div>
                                                    <div class="backup-date">2026-01-18 08:00</div>
                                                    <div class="backup-type">Automático</div>
                                                </div>
                                            </div>
                                            <div class="backup-size">2.3 GB</div>
                                        </div>
                                        <div class="backup-actions">
                                            <button class="btn-backup-action restore">Restaurar</button>
                                            <button class="btn-backup-action download">Descargar</button>
                                            <button class="btn-backup-action delete" aria-label="Eliminar backup">
                                                <i data-lucide="trash-2" class="btn-icon-small"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="backup-item">
                                        <div class="backup-header">
                                            <div class="backup-info">
                                                <i data-lucide="check-circle" class="backup-icon success"></i>
                                                <div>
                                                    <div class="backup-date">2026-01-17 14:30</div>
                                                    <div class="backup-type">Manual</div>
                                                </div>
                                            </div>
                                            <div class="backup-size">2.3 GB</div>
                                        </div>
                                        <div class="backup-actions">
                                            <button class="btn-backup-action restore">Restaurar</button>
                                            <button class="btn-backup-action download">Descargar</button>
                                            <button class="btn-backup-action delete" aria-label="Eliminar backup">
                                                <i data-lucide="trash-2" class="btn-icon-small"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Mantenimiento Tab -->
                    <div class="tab-pane" id="mantenimiento-tab">
                        <div class="maintenance-container">
                            <div class="maintenance-card gradient-blue">
                                <div class="maintenance-header">
                                    <div class="maintenance-icon">
                                        <i data-lucide="refresh-cw" class="maintenance-icon-svg"></i>
                                    </div>
                                    <div>
                                        <h3 class="maintenance-title">Optimizar Base de Datos</h3>
                                        <p class="maintenance-description">Reorganiza y optimiza tablas</p>
                                    </div>
                                </div>
                                <button class="btn btn-blue btn-full">
                                    Ejecutar Optimización
                                </button>
                            </div>
                            
                            <div class="maintenance-card gradient-purple">
                                <div class="maintenance-header">
                                    <div class="maintenance-icon">
                                        <i data-lucide="trash-2" class="maintenance-icon-svg"></i>
                                    </div>
                                    <div>
                                        <h3 class="maintenance-title">Limpiar Registros Antiguos</h3>
                                        <p class="maintenance-description">Elimina datos de más de 2 años</p>
                                    </div>
                                </div>
                                <button class="btn btn-purple btn-full">
                                    Iniciar Limpieza
                                </button>
                            </div>
                            
                            <div class="maintenance-card gradient-emerald">
                                <div class="maintenance-header">
                                    <div class="maintenance-icon">
                                        <i data-lucide="check-circle" class="maintenance-icon-svg"></i>
                                    </div>
                                    <div>
                                        <h3 class="maintenance-title">Verificar Integridad</h3>
                                        <p class="maintenance-description">Revisa consistencia de datos</p>
                                    </div>
                                </div>
                                <button class="btn btn-emerald btn-full">
                                    Verificar Ahora
                                </button>
                            </div>
                            
                            <div class="maintenance-card gradient-amber">
                                <div class="maintenance-header">
                                    <div class="maintenance-icon">
                                        <i data-lucide="settings" class="maintenance-icon-svg"></i>
                                    </div>
                                    <div>
                                        <h3 class="maintenance-title">Reconstruir Índices</h3>
                                        <p class="maintenance-description">Mejora rendimiento de consultas</p>
                                    </div>
                                </div>
                                <button class="btn btn-amber btn-full">
                                    Reconstruir
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Importar/Exportar Tab -->
                    <div class="tab-pane" id="importar-tab">
                        <div class="import-export-container">
                            <div class="import-card">
                                <div class="import-icon">
                                    <i data-lucide="upload" class="import-icon-svg"></i>
                                </div>
                                <h3 class="import-title">Importar Datos</h3>
                                <p class="import-description">Soporta archivos CSV, JSON y XML</p>
                                <button class="btn btn-primary">
                                    Seleccionar Archivo
                                </button>
                            </div>
                            
                            <div class="export-card">
                                <div class="export-icon">
                                    <i data-lucide="download" class="export-icon-svg"></i>
                                </div>
                                <h3 class="export-title">Exportar Datos</h3>
                                <p class="export-description">Descarga en múltiples formatos</p>
                                <div class="export-buttons">
                                    <button class="btn-export csv">CSV</button>
                                    <button class="btn-export excel">Excel</button>
                                    <button class="btn-export json">JSON</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/1.0.0/lucide.min.js"></script>
    <script src="../scripts.js" defer></script>
    <script src="Herramientas BD.js"></script>
</body>
</html>